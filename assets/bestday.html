<html>
  <head>
    <title>S&P500 1 Day Average Returns (1950-2019)</title>
    <style>
      body { font-family: system-ui; }
      .main { display: grid; padding: 10px 16.3px; } 
      table { background: darkgray; }
      th { background: lightgray; }
      th, td { width: 60px; text-align: center; position: relative; }
      .selected {
        position: absolute;
        top: 0; 
        left: 0;
        right: 0;
        bottom: 0;
        text-align: center; 
        border: 2px solid black;
        margin: -2px;
        z-index: 1;
      }
    </style>
  </head>
<body>
  <script>
    const data = {
      "01-01": "",
      "01-02": "28",
      "01-03": "18",
      "01-04": "12",
      "01-05": "15",
      "01-06": "8",
      "01-07": "-10",
      "01-08": "-24",
      "01-09": "-12",
      "01-10": "14",
      "01-11": "6",
      "01-12": "-11",
      "01-13": "-9",
      "01-14": "25",
      "01-15": "11",
      "01-16": "10",
      "01-17": "5",
      "01-18": "12",
      "01-19": "-4",
      "01-20": "-32",
      "01-21": "4",
      "01-22": "-4",
      "01-23": "13",
      "01-24": "-6",
      "01-25": "6",
      "01-26": "11",
      "01-27": "12",
      "01-28": "13",
      "01-29": "11",
      "01-30": "3",
      "01-31": "32",
      "02-01": "11",
      "02-02": "10",
      "02-03": "21",
      "02-04": "-14",
      "02-05": "-17",
      "02-06": "9",
      "02-07": "2",
      "02-08": "-16",
      "02-09": "-16",
      "02-10": "1",
      "02-11": "3",
      "02-12": "17",
      "02-13": "20",
      "02-14": "4",
      "02-15": "18",
      "02-16": "-5",
      "02-17": "-8",
      "02-18": "6",
      "02-19": "-16",
      "02-20": "4",
      "02-21": "-15",
      "02-22": "4",
      "02-23": "-13",
      "02-24": "15",
      "02-25": "4",
      "02-26": "8",
      "02-27": "-17",
      "02-28": "-5",
      "02-29": "-6",
      "03-01": "31",
      "03-02": "2",
      "03-03": "13",
      "03-04": "17",
      "03-05": "13",
      "03-06": "-3",
      "03-07": "-19",
      "03-08": "4",
      "03-09": "3",
      "03-10": "10",
      "03-11": "26",
      "03-12": "4",
      "03-13": "1",
      "03-14": "-10",
      "03-15": "25",
      "03-16": "30",
      "03-17": "25",
      "03-18": "28",
      "03-19": "-15",
      "03-20": "-1",
      "03-21": "-8",
      "03-22": "-11",
      "03-23": "23",
      "03-24": "-17",
      "03-25": "3",
      "03-26": "19",
      "03-27": "-5",
      "03-28": "-9",
      "03-29": "16",
      "03-30": "-23",
      "03-31": "0",
      "04-01": "36",
      "04-02": "3",
      "04-03": "2",
      "04-04": "-5",
      "04-05": "29",
      "04-06": "4",
      "04-07": "-21",
      "04-08": "20",
      "04-09": "22",
      "04-10": "20",
      "04-11": "-11",
      "04-12": "29",
      "04-13": "-12",
      "04-14": "-3",
      "04-15": "20",
      "04-16": "23",
      "04-17": "25",
      "04-18": "23",
      "04-19": "-12",
      "04-20": "-7",
      "04-21": "23",
      "04-22": "1",
      "04-23": "-7",
      "04-24": "-11",
      "04-25": "13",
      "04-26": "10",
      "04-27": "-7",
      "04-28": "-5",
      "04-29": "15",
      "04-30": "0",
      "05-01": "26",
      "05-02": "17",
      "05-03": "7",
      "05-04": "2",
      "05-05": "16",
      "05-06": "-13",
      "05-07": "-20",
      "05-08": "21",
      "05-09": "-9",
      "05-10": "-6",
      "05-11": "-17",
      "05-12": "18",
      "05-13": "-11",
      "05-14": "-9",
      "05-15": "3",
      "05-16": "7",
      "05-17": "-14",
      "05-18": "-4",
      "05-19": "-7",
      "05-20": "-10",
      "05-21": "-3",
      "05-22": "3",
      "05-23": "-18",
      "05-24": "-2",
      "05-25": "-10",
      "05-26": "11",
      "05-27": "16",
      "05-28": "0",
      "05-29": "16",
      "05-30": "16",
      "05-31": "15",
      "06-01": "19",
      "06-02": "10",
      "06-03": "3",
      "06-04": "-2",
      "06-05": "13",
      "06-06": "16",
      "06-07": "4",
      "06-08": "-9",
      "06-09": "-20",
      "06-10": "9",
      "06-11": "7",
      "06-12": "-2",
      "06-13": "10",
      "06-14": "-5",
      "06-15": "1",
      "06-16": "15",
      "06-17": "6",
      "06-18": "-8",
      "06-19": "-3",
      "06-20": "-10",
      "06-21": "1",
      "06-22": "-13",
      "06-23": "-5",
      "06-24": "-19",
      "06-25": "-9",
      "06-26": "-26",
      "06-27": "-2",
      "06-28": "22",
      "06-29": "-1",
      "06-30": "11",
      "07-01": "25",
      "07-02": "3",
      "07-03": "31",
      "07-04": "",
      "07-05": "15",
      "07-06": "8",
      "07-07": "7",
      "07-08": "4",
      "07-09": "19",
      "07-10": "-11",
      "07-11": "8",
      "07-12": "14",
      "07-13": "0",
      "07-14": "24",
      "07-15": "1",
      "07-16": "3",
      "07-17": "8",
      "07-18": "-11",
      "07-19": "0",
      "07-20": "-6",
      "07-21": "-15",
      "07-22": "-9",
      "07-23": "-11",
      "07-24": "2",
      "07-25": "9",
      "07-26": "11",
      "07-27": "0",
      "07-28": "-12",
      "07-29": "11",
      "07-30": "27",
      "07-31": "5",
      "08-01": "-4",
      "08-02": "14",
      "08-03": "2",
      "08-04": "-25",
      "08-05": "-15",
      "08-06": "5",
      "08-07": "17",
      "08-08": "-6",
      "08-09": "-3",
      "08-10": "-19",
      "08-11": "20",
      "08-12": "-8",
      "08-13": "0",
      "08-14": "2",
      "08-15": "-1",
      "08-16": "9",
      "08-17": "24",
      "08-18": "-16",
      "08-19": "-19",
      "08-20": "22",
      "08-21": "-7",
      "08-22": "5",
      "08-23": "1",
      "08-24": "1",
      "08-25": "-14",
      "08-26": "4",
      "08-27": "-3",
      "08-28": "-6",
      "08-29": "12",
      "08-30": "-12",
      "08-31": "7",
      "09-01": "8",
      "09-02": "25",
      "09-03": "11",
      "09-04": "-14",
      "09-05": "-6",
      "09-06": "14",
      "09-07": "-7",
      "09-08": "8",
      "09-09": "-27",
      "09-10": "-5",
      "09-11": "7",
      "09-12": "3",
      "09-13": "17",
      "09-14": "7",
      "09-15": "-6",
      "09-16": "36",
      "09-17": "-21",
      "09-18": "18",
      "09-19": "6",
      "09-20": "-15",
      "09-21": "-27",
      "09-22": "-11",
      "09-23": "-14",
      "09-24": "-14",
      "09-25": "-16",
      "09-26": "-19",
      "09-27": "3",
      "09-28": "25",
      "09-29": "-33",
      "09-30": "0",
      "10-01": "21",
      "10-02": "19",
      "10-03": "-7",
      "10-04": "13",
      "10-05": "23",
      "10-06": "18",
      "10-07": "-12",
      "10-08": "0",
      "10-09": "-31",
      "10-10": "4",
      "10-11": "13",
      "10-12": "4",
      "10-13": "26",
      "10-14": "3",
      "10-15": "-5",
      "10-16": "-5",
      "10-17": "-5",
      "10-18": "26",
      "10-19": "-51",
      "10-20": "41",
      "10-21": "19",
      "10-22": "-38",
      "10-23": "-4",
      "10-24": "-14",
      "10-25": "-18",
      "10-26": "-20",
      "10-27": "-8",
      "10-28": "54",
      "10-29": "30",
      "10-30": "24",
      "10-31": "9",
      "11-01": "17",
      "11-02": "30",
      "11-03": "38",
      "11-04": "14",
      "11-05": "24",
      "11-06": "-8",
      "11-07": "-10",
      "11-08": "7",
      "11-09": "-1",
      "11-10": "2",
      "11-11": "18",
      "11-12": "-7",
      "11-13": "9",
      "11-14": "2",
      "11-15": "-5",
      "11-16": "4",
      "11-17": "2",
      "11-18": "-1",
      "11-19": "-38",
      "11-20": "-11",
      "11-21": "23",
      "11-22": "-3",
      "11-23": "18",
      "11-24": "45",
      "11-25": "16",
      "11-26": "28",
      "11-27": "22",
      "11-28": "16",
      "11-29": "1",
      "11-30": "8",
      "12-01": "4",
      "12-02": "5",
      "12-03": "-14",
      "12-04": "15",
      "12-05": "20",
      "12-06": "19",
      "12-07": "4",
      "12-08": "3",
      "12-09": "2",
      "12-10": "1",
      "12-11": "-15",
      "12-12": "-4",
      "12-13": "-3",
      "12-14": "-24",
      "12-15": "-8",
      "12-16": "39",
      "12-17": "0",
      "12-18": "26",
      "12-19": "-1",
      "12-20": "-5",
      "12-21": "21",
      "12-22": "16",
      "12-23": "4",
      "12-24": "10",
      "12-25": "",
      "12-26": "50",
      "12-27": "16",
      "12-28": "-4",
      "12-29": "15",
      "12-30": "14",
      "12-31": "16",
    }
    let min = 0
    let max = 0
    for (const value of Object.values(data)) {
      if (value == "") continue
      val = Number(value)
      if (val < min) {
        min = val
      }
      if (val > max) {
        max = val
      }
    }
    const base = Math.abs(min)  
    const oneValuePercent = (base + max) / 100
    const queryString = window.location.search
    let query = ""
    if (queryString.length > 0) {
      query = queryString.substr(1)
    }
    const monthNames = [
      "Jan", "Feb", "Mar", "Apr", "May", "Jun",
      "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
    ]
    function getColorFromRedToGreenByPercentage(value) {
      const hue = Math.round(value)
      const lightness = 50
      return `hsl(${hue}, 80%, ${lightness}%)`
    }      
    const zeroPad = (num, places) => String(num).padStart(places, '0')
    const sum = {}
    for (let month = 1; month <= 12; month++) {
      sum[month] = 0
    }
    document.body.onload = () => {
      let s = ""
      s += "<div class=main>" 
      s += "<table>"
      s += "<tr>"
      s += "<th>%</th>"  
      for (let month = 1; month <= 12; month++) {
        s += `<th>${monthNames[month-1]}</th>`
      }
      s += "</tr>"
      for (let day = 1; day <= 31; day++) {
        s += "<tr>"
        s += `<th>${day}</th>`  
        for (let month = 1; month <= 12; month++) {
          const key = `${zeroPad(month, 2)}-${zeroPad(day, 2)}` 
          const val = data[key] ?? ""
          let color, displayValue
          if (val != "") {
            const value = Number(val)
            const valuePercents = Math.round((base + value) / oneValuePercent)
            color = getColorFromRedToGreenByPercentage(valuePercents)
            displayValue = value / 100 
            sum[month] += value
          }
          s += `<td style="background-color: ${color ?? "lightgray"}">`
          s += displayValue ?? ""
          s += `<div class="${key == query ? "selected" : ""}">`
          s += "</div>"
          s += "</td>"
        }
        s += "</tr>"
      }
      s += "<tr>"
      s += "<th>SUM</th>"  
      for (let month = 1; month <= 12; month++) {
        s += `<th>${sum[month] / 100}</th>`
      }
      s += "</tr>"
      s += "</table>"
      s += "</div>" 
      document.body.innerHTML = s
    };
  </script>
</body>
</html>
